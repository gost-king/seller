/**
РбђРБђРађРађРађРа░РБХРАќРа▓РадРацРБ┐РБЮРа▓РБцРБёРАђРБђРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РаИРБ┐РАЅРаЏРБњРа▓РаЙРАЪРаЊРањРа▓РАЙРб┐РБ┐Рб┐РАдРБЇРа╗РБиРБцРБђРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРа╣РБЪРбёРАѕРаЎРабРацРБђРБђРБђРБЎРБдРБЎРа╗РбдРБїРА│РаёРБ┐РБ«РБиРАђРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРБ┐РАиРБЮРАбРаёРб░РАџРаЏРаЊРањРацРагРБ┐РАХРагРАЁРаўРб┐РБиРађРБ╗РБёРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРа╣РБЌРБцРБйРАдРаёРаЎРбдРБђРађРађРађРб╗РаўРБєРб░РБњРБдРБцРБ╝РБЇРА┐РБєРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРаѕРаЎРБ┐Рб»РБћРБњРБђРБѕРа┐РањРБђРАцРањРаІРаЅРаЂРађРађРађРаЅРБ┐РАўРбдРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРа┐РаиРбХРАъРаІРаЅРбЕРацРаъРаЂРађРађРађРбђРБђРБцРацРа▓РБъРБ┐РБиРаИРАєРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРбИРБ┐РБђРБђРБђРБаРацРацРаќРбњРБ┐Ра┐РаЪРаЏРаѓРађРб╣РБ┐РБ┐РађРбДРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРаИРБ┐РБ╗РАаРацРБцРБ┤РБдРАђРаЅРаЂРа┤РБ┐РаЪРађРађРађРБ┐РаЈРађРађРаЉРбёРађРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРађРб╗РБ┐РБЄРађРаЏРаЏРаЂРБЄРБђРБцРАцРацРацРацРб░РАЙРаЃРађРађРбђРБђРАѕРбБРађРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРађРађРб╗РБ┐РБцРАцРаќРБФРахРбиРаџРаЏРб╗РаЅРБ╣РаІРађРБаРаћРбіРБЂРАцРацРаїРбДРађРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРађРађРаѕРб┐РБиРаџРаЅРб▒РађРаИРАёРађРБаРаЪРаЂРа┤РБФРаћРаіРаЂРађРађРађРађРаѕРбдРађРађРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРађРађРађРБ╝РБ┐РБЄРађРађРаЄРађРБ▒РаъРаЂРађРАаРаІРађРађРађРађРађРађРађРађРађРађРа│РБёРађРађРађРађРађРађРађРађ
РађРађРађРађРађРађРађРађРбаРБ┐РБ┐РА┐РБєРађРбаРаъРаЂРађРАаРаіРађРађРађРађРађРађРбђРБђРБаРБцРацРаћРањРаџРаЊРањРацРБёРАђРађРађРађ
РађРађРађРађРађРађРађРБ░РБ┐РБ┐РА┐РаЂРаѕРАХРаЃРбђРА┤РаіРађРађРађРађРађРБаРа┤РаџРаЅРБаРаІРађРађРађРађРађРађРађРађРађРаЎРбєРађРађ
РађРађРађРађРађРађРб░РБ┐РБ┐РаЪРађРбђРаъРаЂРаљРаІРађРађРађРађРБаРб┤РАјРаЂРађРађРА┤РаЂРађРађРађРађРађРађРађРађРађРађРађРаѕРбДРађ
РађРађРађРађРађРађРаѕРб┐РАЄРађРбаРБЈРБаРаъРађРађРађРбђРА┤РаіРаЂРађРа│РађРбђРАюРаЂРађРађРађРађРађРађРађРађРађРађРађРађРађРаўРАЄ
РађРађРађРађРађРађРађРаўРБиРађРаИРаѕРађРађРбђРАцРаќРаЅРађРБаРаєРађРађРбђРАъРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРАЄ
РађРађРађРађРађРбђРА┤РаІРб╣РБєРБђРБаРБцРањРаЎРАЄРБаРаћРаІРађРађРађРађРБИРаЄРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРАЄ
РађРађРађРађРађРАъРађРбђРа╝РАЄРб░РБЙРБ┐РБиРА┤РБЪРаЂРађРађРађРађРађРБ░РаЃРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРАЄ
РађРађРађРађРађРБЄРА┤РбЂРА┤РБЄРБеРБ╝РБ┐РаІРађРаѕРађРађРађРађРбђРА╝РаЂРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРбИРаЃ
РађРађРађРађРађРаЅРађРаѕРађРаѕРађРађРаЅРађРађРађРађРађРађРађРаѕРаЂРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађ
 Copyright (C) 2023
 Licensed under the  GPL-3.0 License;
 You may not use this file except in compliance with the License.
 It is supplied in the hope that it may be useful.
 * @project_name : Dark Nero V9
 * @description : Dark Nero V9,A Multi-functional whatsapp bot.
 **/

const moment = require('moment-timezone')
const {fetchJson,cmd, tlang } = require('../lib')
let gis = require("async-g-i-s");
const axios = require('axios')
const fetch = require('node-fetch')

    //---------------------------------------------------------------------------
cmd({
            pattern: "imdb",
            category: "search",
            react: "­Ъјъ№ИЈ",
            desc: "Sends image of asked Movie/Series.",
            use: '<text>',
            filename: __filename,
        },
        async(Void, citel, text) => {
            if (!text) return citel.reply(`_Name a Series or movie ${tlang().greet}._`);
            let fids = await axios.get(`http://www.omdbapi.com/?apikey=742b2d09&t=${text}&plot=full`);
            let imdbt = "";
            console.log(fids.data)
            imdbt += "РћЈРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЊ\n" + " ``` ╔фр┤Їр┤Ё╩Ў Жю▒р┤Єр┤ђ╩ђр┤ё╩ю```\n" + "РћЈРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЊ\n\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤Џ╔фр┤Џр┤Є╩Ъ      : " + fids.data.Title + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩Јр┤Єр┤ђ╩ђ      : " + fids.data.Year + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩ђр┤ђр┤Џр┤Єр┤Ё     : " + fids.data.Rated + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩ђр┤Є╩Ър┤Єр┤ђЖю▒р┤Єр┤Ё  : " + fids.data.Released + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩ђр┤ю╔┤р┤Џ╔фр┤Їр┤Є   : " + fids.data.Runtime + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╔бр┤Є╔┤╩ђр┤Є     : " + fids.data.Genre + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤Ё╔ф╩ђр┤Єр┤ёр┤Џр┤Ј╩ђ  : " + fids.data.Director + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤А╩ђ╔фр┤Џр┤Є╩ђ    : " + fids.data.Writer + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤ђр┤ёр┤Џр┤Ј╩ђЖю▒    : " + fids.data.Actors + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤ў╩Ър┤Јр┤Џ       : " + fids.data.Plot + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩Ър┤ђ╔┤╔бр┤юр┤ђ╔бр┤Є  : " + fids.data.Language + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤ёр┤Јр┤ю╔┤р┤Џ╩ђ╩Ј   : " + fids.data.Country + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤ђр┤Ар┤ђ╩ђр┤ЁЖю▒    : " + fids.data.Awards + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╩Ўр┤Јxр┤ЈЖю░Жю░╔фр┤ёр┤Є  : " + fids.data.BoxOffice + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈр┤ў╩ђр┤Јр┤Ёр┤юр┤ёр┤Џ╔фр┤Ј╔┤ : " + fids.data.Production + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╔фр┤Їр┤Ё╩Ў╩ђр┤ђр┤Џ╔ф╔┤╔б : " + fids.data.imdbRating + "\n\n";
            imdbt += "­ЪДџРЃЪРЃФ­Ъјъ№ИЈ╔фр┤Їр┤Ё╩Ў р┤ар┤Јр┤Џр┤ЄЖю▒  : " + fids.data.imdbVotes + "";
            Void.sendMessage(citel.chat, {
                image: {
                    url: fids.data.Poster,
                },
                caption: imdbt,
            }, {
                quoted: citel,
            });

        }
    )
    //---------------------------------------------------------------------------
cmd({
            pattern: "weather",
            react: "­Ъїц№ИЈ",
            category: "search",
            desc: "Sends weather info about asked place.",
            use: '<location>',
            filename: __filename,
        },
        async(Void, citel, text) => {
            if (!text) return citel.reply("Give me location.Baka!!");
            let wdata = await axios.get(
                `https://api.openweathermap.org/data/2.5/weather?q=${text}&units=metric&appid=060a6bcfa19809c2cd4d97a212b19273&language=en`
            );
            let textw = "";
            textw += `*­Ъїд№ИЈр┤Ар┤Єр┤ђр┤Џ╩юр┤Є╩ђ р┤ЈЖю░  ${text}РЏЁ*\n\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈр┤Ар┤Єр┤ђр┤Џ╩юр┤Є╩ђ :-* ${wdata.data.weather[0].main}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈр┤Ёр┤ЄЖю▒р┤ё╩ђ╔фр┤ўр┤Џ╔фр┤Ј╔┤ :-* ${wdata.data.weather[0].description}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈр┤ђр┤а╔б р┤Џр┤Єр┤Їр┤ў :-* ${wdata.data.main.temp}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈЖю░р┤Єр┤Є╩ЪЖю▒ ╩Ъ╔фр┤Ір┤ЄFeels Like:-* ${wdata.data.main.feels_like}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈр┤ў╩ђр┤ЄЖю▒Жю▒р┤ю╩ђр┤Є :-* ${wdata.data.main.pressure}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈ╩юр┤юр┤Ї╔фр┤Ё╔фр┤Џ╩Ј :-* ${wdata.data.main.humidity}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈ╩юр┤юр┤Ї╔фр┤Ё╔фр┤Џ╩Ј :-* ${wdata.data.wind.speed}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈ╩Ър┤ђр┤Џ╔фр┤Џр┤юр┤Ёр┤Є :-* ${wdata.data.coord.lat}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈ╩Ър┤Ј╔┤╔б╔фр┤Џр┤юр┤Ёр┤Є :-* ${wdata.data.coord.lon}\n`;
            textw += `*­ЪДџРЃЪ­Ъїд№ИЈр┤ёр┤Јр┤ю╔┤р┤Џ╩ђ╩Ј :-* ${wdata.data.sys.country}\n`;

            Void.sendMessage(
                citel.chat, {
                    text: textw,
                }, {
                    quoted: citel,
                }
            );

        }
    )
    
    //---------------------------------------------------------------------------
    cmd({
        pattern: "google",
        react: "­ЪЈ«",
        alias :['search','gsearch'],
        category: "search",
        desc: "Sends info of given query from Google Search.",
        use: '<text>',
        filename: __filename,
    },
    async(Void, citel, text) => {
        if (!text) return citel.reply(`give me a query\n*Example : .google Who is Dark Nero V9.*`);
        let google = require('google-it');
        google({ 'query': text}).then(res => {
            let msg= `Google Search From : ${text} \n\n`;
            for (let g of res) {
                msg+= `­ЪДџРЃЪ­ЪЈ« р┤Џ╔фр┤Џ╩Ър┤Є : ${g.title}\n`;
                msg+= `­ЪДџРЃЪ­ЪЈ« р┤Ёр┤ЄЖю▒р┤ё╩ђ╔фр┤ўр┤Џ╔фр┤Ј╔┤ : ${g.snippet}\n`;
                msg+= `­ЪДџРЃЪ­ЪЈ« ╩Ъ╔ф╔┤р┤І : ${g.link}\n\nРћЂРћЅРћЂРћЅРћЂРћЅРћЂРћЅРћЂРћЅРћЂРћЅРћЂ\n\n`;
            }
         
            return citel.reply(msg);
        })
    }
)
    //---------------------------------------------------------------------------
cmd({
            pattern: "img",
            react: "­Ъќ╝№ИЈ",
            category: "search",
            desc: "Searches Image on Google",
            use: '<text>',
            filename: __filename,
        },
        async(Void, citel, text) => {
            if (!text) return citel.reply("Provide me a query!")
            if (!text) return reply("Hey bie please tell me for which pic you're looking");
            let name1 = text.split("|")[0]
            let name2 = text.split("|")[1] || `10`
            citel.reply(`РЈ│ *р┤ў╩Ър┤Єр┤ђЖю▒р┤Є р┤Ар┤ђ╔фр┤Џ.....*`)
            let nn = name2
            for (let i = 0; i < nn; i++) {

                let n = await gis(name1)
                images = n[Math.floor(Math.random() * n.length)].url;
                    let buttonMessage = {
                        image: {
                            url: images,
                        },
                        caption: `_┬ЕQр┤юр┤Єр┤Є╔┤ ╔┤р┤Єр┤Џ╩юр┤ю р┤Їр┤Ё_\n*${name1}*`,
                        headerType: 4,
                    };
                    Void.sendMessage(citel.chat, buttonMessage, {
                        quoted: citel,
                    });
            }
        }
    )
